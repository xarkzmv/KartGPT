#  KartGPT: Veh√≠culo Aut√≥nomo con Visi√≥n por Computador

**KartGPT** es un sistema de conducci√≥n aut√≥noma a escala que utiliza una arquitectura distribuida (*Edge-to-Fog Computing*). Un **ESP32-CAM** act√∫a como el "cuerpo" (sensores y actuadores) y un **PC** act√∫a como el "cerebro", procesando video en tiempo real mediante **Redes Neuronales Convolucionales (CNN)** para la detecci√≥n de se√±ales de tr√°fico y navegaci√≥n en pista.

---

##  Requisitos Previos

### Hardware
* **Veh√≠culo:** Chasis con motores DC y direcci√≥n (tipo diferencial o est√°ndar).
* **Controlador:** ESP32-CAM (modelo AI-Thinker recomendado).
* **Alimentaci√≥n:** (Se utilizaron 4 bater√≠as de 1.5A)
* **Extras:** LEDs de colores (Rojo, Azul, Verde) para el sem√°foro de inicio.

### Software
* **PC:** Python 3.9 o superior.
* **ESP32:** Arduino IDE para cargar el firmware.
* **Red:** Ambos dispositivos deben estar conectados a la misma red Wi-Fi.

---

## ‚öôÔ∏è Instalaci√≥n

### 1. Configuraci√≥n del Entorno Python (PC)
Clona este repositorio e instala las dependencias necesarias:

```bash
git clone [https://github.com/tu_usuario/KartGPT.git](https://github.com/tu_usuario/KartGPT.git)
cd KartGPT
pip install tensorflow opencv-python numpy pynput matplotlib seaborn scikit-learn


2. Configuraci√≥n del Firmware (ESP32)

    Abre el archivo .ino (ubicado en la carpeta arduino/ o ra√≠z) con Arduino IDE.

    Instala las librer√≠as necesarias: ESP32 (Board Manager), ESPAsyncWebServer y AsyncTCP.

    Modifica las credenciales de Wi-Fi en el c√≥digo:
    C++

const char *ssid = "TU_RED_WIFI";
const char *password = "TU_CONTRASE√ëA";

Sube el c√≥digo al ESP32-CAM.

Abre el Monitor Serie (115200 baudios) y anota la Direcci√≥n IP asignada (ej: 192.168.1.113).

3. Configuraci√≥n del Sistema (Python)

Abre el archivo config.py y actualiza la IP con la que obtuviste en el paso anterior:
Python

# config.py
ESP_IP = "192.168.1.113"  # <--- Tu IP aqu√≠

üöÄ Ejecuci√≥n del Proyecto

Sigue estos pasos estrictos para iniciar el piloto autom√°tico:
Paso 1: Iniciar el Veh√≠culo (Modo Manual)

    Enciende el KartGPT.

    Desde tu PC o m√≥vil, abre un navegador y ve a http://<IP_DEL_ESP32>.

    Ver√°s la interfaz estilo "GameBoy". Comprueba que el video funciona y que puedes mover el auto con las teclas WASD.

Paso 2: Activar el Enlace de Datos

Para que el script de Python pueda tomar el control del video, debes liberar el canal desde el navegador:

    En la interfaz web, haz clic en el bot√≥n "MODO AUTO" (o presiona ESPACIO).

    La pantalla se pondr√° negra con el mensaje: "ESPERANDO PYTHON...".

Paso 3: Iniciar el Cerebro (Python)

En tu terminal de PC, dentro de la carpeta del proyecto, ejecuta:
Bash

python main.py

    El sistema cargar√° los modelos (modelo_sem√°foro.h5 y modelo_pista.h5).

    Se abrir√° una ventana "KART GPT" mostrando lo que ve el auto.

    Estado inicial: MODO: ESPERA. El auto estar√° quieto buscando una se√±al.

Paso 4: ¬°A Correr! 

    Coloca una luz AZUL frente a la c√°mara.

    La IA detectar√° la se√±al de inicio (GO!) y cambiar√° a MODO: AUTO.

    El veh√≠culo comenzar√° a navegar la pista autom√°ticamente.

    Para detenerlo de emergencia, muestra una luz ROJA o presiona q en la terminal del PC.

üõ†Ô∏è Herramientas de Desarrollo (Entrenamiento)

Si quieres re-entrenar los modelos con tu propia pista:
1. Recolecci√≥n de Datos

    Sem√°foro: Ejecuta python recolector_leds.py. Usa las teclas B (Azul), R (Rojo) y Espacio (Off) para guardar fotos.

    Pista: Ejecuta python recolectar_datos.py. Conduce manualmente con WASD. El script guardar√° las fotos etiquetadas autom√°ticamente seg√∫n tu conducci√≥n.

        Tip: Usa la tecla C para resetear el estado de las ruedas al centro si es necesario.

2. Entrenamiento

    Ejecuta python driving_training.py para generar un nuevo modelo_pista_vectorial.h5.

    El script aplicar√° autom√°ticamente el recorte (ROI) y la normalizaci√≥n necesaria.

 Estructura del Proyecto

    main.py: Script principal. Orquesta los hilos de video, IA y control.

    config.py: Archivo de configuraci√≥n global (IPs, Dimensiones, Umbrales).

    utils.py: M√≥dulo de utilidades. Contiene la clase VideoStream (Multithreading) y funciones de preprocesamiento.

    driving/: Contiene el script de entrenamiento y el modelo de conducci√≥n.

    led_recognition/: Contiene scripts de entrenamiento y el modelo de sem√°foro.

    dataset_*/: Carpetas con las im√°genes recolectadas.

Autor: xarkzmv


